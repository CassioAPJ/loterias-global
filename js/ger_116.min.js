function iniciar_gerador(){$("#bt_principal").on("click",function(){gerar_supresinha()});$("#link_gerador_removidos_ajuda").click(function(){$("#gerador_removidos_ajuda").animate({height:"toggle",opacity:"toggle"},{duration:300})});$("#link_gerador_removidos_ajuda_fechar").click(function(){$("#gerador_removidos_ajuda").animate({height:"toggle",opacity:"toggle"},{duration:300})});$("#link_gerador_fixos_ajuda").click(function(){$("#gerador_fixos_ajuda").animate({height:"toggle",opacity:"toggle"},{duration:300})});$("#link_gerador_fixos_ajuda_fechar").click(function(){$("#gerador_fixos_ajuda").animate({height:"toggle",opacity:"toggle"},{duration:300})});$("#qtde_numeros").change(function(){gerar_posicoes_numeros();validar_maximo_removidos()});$("#loader_ferramenta").html("");$("#bt_principal").prop("disabled",false)}function validar_dezenas(){var retorno=true;var str_fixas=normalizar_array($("#dezenas_fixas").val());if(str_fixas!="")var arr_dezenas_fixas=str_fixas.split(",");else var arr_dezenas_fixas=[];if(arr_dezenas_fixas.length>=parseInt($("#qtde_numeros").val())){alert('Você o passou do limite máximo de "Numeros Fixos"! \nO limite é um número a menos que a quantidade de números por jogo!');$("#dezenas_fixas").select();$("#qtde_numeros").focus();retorno=false;return retorno}$.each(arr_dezenas_fixas,function(chave,valor){if(valor!=""){if($.isNumeric(valor)==false){alert('O número fixo digitado "'+valor+'" é inválido!');$("#dezenas_fixas").select();$("#dezenas_fixas").focus();retorno=false;return retorno}else{if(parseInt(valor)>parseInt($("#dez_max").val())){alert('O número fixo digitado "'+valor+'" é maior que o permitido na '+$("#nome_loteria").val()+"!");$("#dezenas_fixas").select();$("#dezenas_fixas").focus();retorno=false;return retorno}if($("#loteria").val()!="lm"){if(parseInt(valor)<$("#dez_min").val()){alert('O número fixo digitado "'+valor+'" é menor que o permitido na '+$("#nome_loteria").val()+"!");$("#dezenas_fixas").select();$("#dezenas_fixas").focus();retorno=false;return retorno}}else{if(parseInt(valor)<parseInt($("#dez_min").val())-1){alert('O número fixo digitado "'+valor+'" é menor que o permitido na '+$("#nome_loteria").val()+"!");$("#dezenas_fixas").select();$("#dezenas_fixas").focus();retorno=false;return retorno}}}}});var arr_valores=[];$.each(arr_dezenas_fixas,function(chave,valor){if(valor!=""){if($.inArray(valor,arr_valores)===-1){arr_valores.push(valor)}else{alert('O número fixo digitado "'+valor+'" está duplicado, apague 1 deles para continuar!');$("#dezenas_fixas").select();$("#dezenas_fixas").focus();retorno=false;return retorno}}});return retorno}function validar_dezenas_removidas(){var retorno=true;var str_removidas=normalizar_array($("#dezenas_removidas").val());if(str_removidas!="")var arr_dezenas_removidas=str_removidas.split(",");else var arr_dezenas_removidas=[];$.each(arr_dezenas_removidas,function(chave,valor){if(valor!=""){if($.isNumeric(valor)==false){alert('O número removido digitado "'+valor+'" é inválido!');$("#dezenas_removidas").select();$("#dezenas_removidas").focus();retorno=false;return retorno}else{if(parseInt(valor)>$("#dez_max").val()){alert('O número removido digitado "'+valor+'" é maior que o permitido na '+$("#nome_loteria").val()+"!");$("#dezenas_removidas").select();$("#dezenas_removidas").focus();retorno=false;return retorno}if($("#loteria").val()!="lm"){if(parseInt(valor)<$("#dez_min").val()){alert('O número removido digitado "'+valor+'" é menor que o permitido na '+$("#nome_loteria").val()+"!");$("#dezenas_removidas").select();$("#dezenas_removidas").focus();retorno=false;return retorno}}else{if(parseInt(valor)<parseInt($("#dez_min").val())-1){alert('O número removido digitado "'+valor+'" é menor que o permitido na '+$("#nome_loteria").val()+"!");$("#dezenas_removidas").select();$("#dezenas_removidas").focus();retorno=false;return retorno}}}}});var arr_valores=[];$.each(arr_dezenas_removidas,function(chave,valor){if(valor!=""){if($.inArray(valor,arr_valores)===-1){arr_valores.push(valor)}else{alert('O número removido digitado "'+valor+'" está duplicado, apague 1 deles para continuar!');$("#dezenas_removidas").select();$("#dezenas_removidas").focus();retorno=false;return retorno}}});return retorno}function validar_maximo_removidos(){var str_removidas=normalizar_array($("#dezenas_removidas").val());if(str_removidas!="")var arr_dezenas_removidas=str_removidas.split(",");else var arr_dezenas_removidas=[];var retorno=true;if($("#dez_max").val()-$("#qtde_numeros").val()-1<arr_dezenas_removidas.length){alert("Você passou do limite de números removidos!\n\nNessa quantidade de 'Numeros por Jogo' é impossível gerar as combinações!\n\nPara continuar, exclua algum número removido e tente novamente!");retorno=false}return retorno}function validar_duplicidade_fixas_removidas(){var retorno=true;var arr_fixas=[];var str_fixas=normalizar_array($("#dezenas_fixas").val());if(str_fixas!="")var arr_fixas=str_fixas.split(",");else var arr_fixas=[];$.each(arr_fixas,function(chave,valor){if(valor!=""){arr_fixas.push(parseInt(valor))}});var str_removidas=normalizar_array($("#dezenas_removidas").val());if(str_removidas!="")var arr_dezenas_removidas=str_removidas.split(",");else var arr_dezenas_removidas=[];$.each(arr_dezenas_removidas,function(chave,valor){if(valor!=""){if($.inArray(parseInt(valor),arr_fixas)!==-1){alert('O número "'+valor+'" foi digitado nos "Números Fixos" e também nos "Números Removidos" \n\n Não tem como gerar assim! \n\nApague 1 deles e tente novamente!');$("#dezenas_removidas").select();$("#dezenas_removidas").focus();retorno=false;return retorno}}});return retorno}function validar_geral(){var retorno=true;if(retorno==true)retorno=validar_maximo_removidos();if(retorno==true)retorno=validar_duplicidade_fixas_removidas();return retorno}$.getScript("js/funcoes.js",function(){});function gerar_posicoes_numeros(){var html_dezenas="";html_dezenas+="<div class='text-left'><strong>Jogo 1</strong></div>";for(i=1;i<=$("#qtde_numeros").val();i++){html_dezenas+='<span class="dezenas '+$("#class_dezena").val()+'">&nbsp;?&nbsp;</span> '}$("#area_resposta").html(html_dezenas)}function gerar_supresinha(){var re_fixas=validar_dezenas();if(re_fixas==true)var re_removidas=validar_dezenas_removidas();else return re_removidas;if(re_removidas==true)var re_geral=validar_geral();else return re_geral;if(re_fixas==true&&re_removidas==true&&re_geral==true){$("#loader_ferramenta").html('<img src="img/ajax-loader-circle.gif" alt="Carregando..." /> Aguarde carregando...');$("#bt_principal").prop("disabled",true);$("#area_resposta").html('Carregando...<br /><img src="img/ajax-loader-bar.gif" alt="Carregando..." />');$.ajax({url:"ferramentas_loterias_ajax.php",dataType:"json",data:{token:token_calc,acao:"gerar_supresinha",loteria:$("#loteria").val(),qtde_jogos:$("#qtde_jogos").val(),qtde_numeros:$("#qtde_numeros").val(),dezenas_fixas:normalizar_array($("#dezenas_fixas").val()),dezenas_removidas:normalizar_array($("#dezenas_removidas").val())},method:"post",success:function(resp){if(resp.situacao=="OK"){var area_resposta="";var a=0;if(resp.jogos.length>0){var str_fixas=normalizar_array($("#dezenas_fixas").val());if(str_fixas!="")var arr_dezenas_fixas=str_fixas.split(",");else var arr_dezenas_fixas=[];var str_removidas=normalizar_array($("#dezenas_removidas").val());if(str_removidas!="")var arr_dezenas_removidas=str_removidas.split(",");else var arr_dezenas_removidas=[];if(arr_dezenas_fixas.length>0){area_resposta+='ATENÇÃO: Os números com <span class="sublinhado">sublinhado</span> (com um risco embaixo), você deixou fixo! <br />Números fixos: '+str_fixas.replace(/,/g,", ")+"<br/><br/>"}if(arr_dezenas_removidas.length>0){area_resposta+='ATENÇÃO: Você <span class="sublinhado">removeu</span> do gerador os seguintes números: '+str_removidas+"<br/><br/>"}for(a=0;a<resp.jogos.length;a++){area_resposta+="<hr />";area_resposta+="<strong>Jogo "+(a+1)+"</strong>";area_resposta+='<div class="limpar_flutuacao"></div>';jQuery.each(resp.jogos[a]["dezenas"],function(idx,valor){area_resposta+=imprimir_dezena_com_css(valor,resp.cd,jQuery.inArray(valor,arr_dezenas_fixas)!=-1?"texto_dezena_fixa":"")});if($("#loteria").val()=="tm"||$("#loteria").val()=="dd"){area_resposta+="<strong>"+resp.jogos[a]["opcao_extra"]+"</strong>"}area_resposta+='<div class="limpar_flutuacao"></div>';area_resposta+="Pares: <strong>"+resp.jogos[a]["par"]+"</strong>";area_resposta+=' <span class="ml-3">Ímpares: <strong>'+resp.jogos[a]["imp"]+"</strong></span>";area_resposta+=' <span class="ml-3">Primos: <strong>'+resp.jogos[a]["pri"]+"</strong></span>";area_resposta+=' <span class="ml-3">Moldura: <strong>'+resp.jogos[a]["mol"]+"</strong></span>";area_resposta+=' <span class="ml-3">Centro: <strong>'+resp.jogos[a]["cen"]+"</strong></span>";area_resposta+=' <div class="d-none d-xl-block limpar_flutuacao"></div>';area_resposta+=' <span class="ml-3">Maior acerto até hoje: <strong>'+resp.jogos[a]["ma"]+"</strong></span>";area_resposta+=' <span class="ml-3">Repetidas concurso anterior: <strong>'+resp.jogos[a]["ra"]+"</strong></span>";area_resposta+=' <button type="button" class="btn btn-link" onClick="javascript:exibir_modal(\'Análise do Jogo Gerado\',\' Carregando...\', this)" data-dezenas="'+resp.jogos[a]["dezenas"].join(",")+'" data-sorteio="1">Mais Detalhes</button>'}area_resposta+="<hr />"}$("#area_resposta").html(area_resposta);$("#loader_ferramenta").html("Resultado abaixo!");$('[data-toggle="popover"]').popover({trigger:"hover"})}else{$("#loader_ferramenta").html("");$("#area_resposta").html('<span class="txt_vermelho">'+resp.msg_erro+"</span>");$("#modal_texto").html('<span class="txt_vermelho">'+resp.msg_erro+"</span>")}$("#bt_principal").prop("disabled",false)}})}}function exibir_modal(titulo,txt,obj){carregar_analise($(obj).data("dezenas"),$(obj).data("sorteio"));$("#modal_titulo").html("<strong>"+titulo+"</strong>");$("#modal_texto").html(txt);$("#exampleModalCenter").modal("show")}function carregar_analise(dezenas,sorteio){$.ajax({url:"ferramentas_loterias_ajax.php",dataType:"json",data:{token:token_calc,acao:"fazer_analise_resultado",loteria:$("#loteria").val(),dezenas:dezenas,sorteio:sorteio},method:"post",success:function(resp){if(resp.situacao=="OK"){area_resposta='<div class="row sem_margem ">';area_resposta+='  <div class="col-12 text-center">Números do Jogo: ';var arr_num=[];jQuery.each(dezenas.split(","),function(idx,valor){valor=("00"+valor).slice(-2);arr_num.push(valor)});area_resposta+=arr_num.join(", ");area_resposta+="  <br/><br/></div>";area_resposta+="</div>";area_resposta+='<div class="tabela_zebrada">';area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="    Consultando todos jogos anteriores, esse jogo acertou:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.m_acer;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="    Números Pares:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.par;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="     Números Ímpares:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.imp;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+=exibir_tag_novo("25/01/2019")+"     Números Primos:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.pri;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="    Repetidos no Concurso Anterior:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.c_ant;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="    Soma dos Números: ";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.sum;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="    Média Aritmética: ";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.med;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="    Desvio Padrão:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.des;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="     Múltiplos de 3:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.mul;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="    Números de Fibonacci:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.fib;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+="    Números Triangulares:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.tri;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+=exibir_tag_novo("25/01/2019")+"    Números na Moldura:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.mol;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+='<div class="row sem_margem ">';area_resposta+='  <div class="col-8 text-right">';area_resposta+=exibir_tag_novo("25/01/2019")+"    Números no Centro:";area_resposta+="  </div>";area_resposta+='  <div class="col-4 text-center">';area_resposta+=resp.cen;area_resposta+="  </div>";area_resposta+="</div>";area_resposta+="</div>";$("#modal_texto").html(area_resposta)}else{$("#area_resposta").html('<span class="txt_vermelho">'+resposta.msg_erro+"</span>");$("#modal_texto").html('<span class="txt_vermelho">'+resposta.msg_erro+"</span>")}}})}