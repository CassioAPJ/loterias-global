(function(){"use strict";angular.module("app.controllers",[])}).call(this),function(){"use strict";angular.module("app.controllers.carrinho",["app.services.cart"]).controller("CartCtrl",["$scope","$rootScope","appConfig","CartSrv",function(n,t,i,r){if(n.add=function(n){return r.add(n)},n.remove=function(){return r.remove(id)},n.removeClass=function(n,t){$("#"+t).removeClass(n)},n.remover_carrinho=function(n,t,i,u){n.preventDefault();var f=r.remove({produto_secao_id:t,grupo_id:i}).then(function(n){var t,i;n.status?t=1:i=1},function(){});return setTimeout(function(){u&&window.location.replace(window.location.href)},500),!0},n.remover_esn_carrinho=function(n,t,i,u){n.preventDefault();var f=r.remove_esn({produto_secao_id:t,produto_id:i}).then(function(n){var t,i;n.status?t=1:i=1},function(){});return setTimeout(function(){u&&window.location.replace(window.location.href)},500),!0},n.modal={view_all:{id:"mini-cart-modal","class":"view_cart_modal",header:"Meu Carrinho",icon:"glyphicon-shopping-cart",body:"_common/js/app/view/carrinho/mini-row-all.html",footer:!1,backdrop:"static"}},n.finalizar=function(){if(n.cart.subtotal>=4.75){window.location.href="/carrinho-itens";return}$.toaster({priority:"danger",title:"Atenção",message:"O valor mínimo para apostas é de R$ 4,75.",settings:{timeout:3e3,toaster:{css:{position:"fixed",top:"auto",left:"auto",bottom:"20px",right:"20px",width:"325px","border-radius":0}}}});setTimeout(function(){try{var n=document.getElementById("toaster");n.remove()}catch(t){}},3500)},!i.isCartLoaded){var u=r.load();u.then(function(){},function(){throw"Could not load cart!";});n.cart=r.getCart();t.$on("cart_updated",function(){n.cart=r.getCart()});i.isCartLoaded=!0}return n.reload=function(){r.load()},n.getPedidoConfirmado=function(){return r.load_cart_clone()},t.$on("cart_deleted",function(){$.toaster({priority:"warning",title:"Sucesso",message:"Item excluído do carrinho.",settings:{timeout:1e3,toaster:{css:{position:"fixed",top:"80px",left:"auto",bottom:"20px",right:"20px",width:"325px","border-radius":0}}}});setTimeout(function(){try{var n=document.getElementById("toaster");n.remove()}catch(t){}},1500)}),t.$on("cart_added",function(){$.toaster({priority:"success",title:"Sucesso",message:"Itens adicionados ao carrinho!",settings:{timeout:2e3,toaster:{css:{position:"fixed",top:"80px",left:"auto",bottom:"auto",right:"20px",width:"325px","border-radius":0}}}});setTimeout(function(){try{var n=document.getElementById("toaster");n.remove()}catch(t){}},2500)}),n.$on("remover_esn_carrinho",function(t,i){n.remover_esn_carrinho(i.e,i.secao_id,i.esn_id)}),n}])}.call(this),function(){angular.module("app.controllers.groups",[]).controller("GroupsCtrl",["$rootScope","$scope","$compile","GroupsSrv","CartSrv","Utils",function(n,t,i,r,u,f){function e(n){var e=$("#topoTimer");e&&e.hide();var u=$(n.relatedTarget).closest("tr"),o=u.data("grupoid"),s=$(n.target).find(".modal-header"),h=$(n.target).find(".modal-body"),f=$(n.target).find(".modal-footer");return setTimeout(function(){window.history.pushState({},"",window.location.pathname+"#/boloes/"+u.data("grupo_codigo").toUpperCase()+window.location.search)},1e3),t.bolaoRowClicked=u,r.getDetails(o).then(function(n){var e,r;if(n){e=s.find("h4");e.replaceWith("<h4><strong>"+n.Secao+'<strong> <ul class="list-inline pull-right"><li>Concurso: <span class="label label-info">'+n.Concurso_codigo+'<\/span><\/li><li>Grupo: <span class="label label-info">'+n.Codigo+"<\/span><\/li><\/ul><\/h4>");r=[];$.each(n.Jogos,function(n,t){t=t.split(".");r.push({idx:t[0].trim(),game:t[1].trim().split("-")})});n.Jogos=r;/<[a-z][\s\S]*>/i.test(n.Descricao)||(n.Descricao="<p>"+n.Descricao+"<\/p>");t.grupo_details=n;var o=i('<div class="col-md-4 col-sm-4 col-xs-4" style="text-align:left;"><a class="btn btn-warning" print-elem template="group_details" print-data="grupo_details">IMPRIMIR<\/a><\/div>')(t),h='<div class="col-md-4 col-sm-4 col-xs-4" style="text-align:center;font-size:1.2rem;font-weight:bold;">'+parseFloat(u.data("valor").toLocaleString().replace(".","").replace(",",".")).toLocaleString("pt-br",{style:"currency",currency:"BRL"})+"<br>"+u.data("qtd_disp")+" de "+u.data("qtd_cotas")+"<\/div >",c=i(h)(t),l=i('<div class="col-md-4 col-sm-4 col-xs-4" style="text-align:right;"><a id="btnComprarModalGrupo" class="btn btn-primary" data-ng-click="add_grupo($event, null, \'deferreredGroupSuccessMessage\')"><i class="glyphicon glyphicon-shopping-cart"><\/i>&nbspCOMPRAR<a><\/div>')(t);angular.element(f).html("");angular.element(f).append(o);angular.element(f).append(c);angular.element(f).append(l);t.$emit("modal_details_loaded")}},function(){}),!0}function o(n){var t=$(n).closest("tr"),i=t.data("grupo_codigo"),o=i.replace(/^([^\(]*)\s.*|^([^\s]*)\s.*/,"$1"),s=i.replace(/.*\(|[a-z|A-Z].*[a-z|A-Z]|\s|\)/g,"").replace(/^\-/,""),h=t.data("time_id"),c=t.data("diadesorte_mes"),r=t.data("secao"),e=o.split("_"),l;return e.shift(),l=e.shift(),{produto_secao:r,produto_secao_id:u.secoes_id[r],produto_id:f.gen.guid(),qtd:1,numeros:s,valor:0,concurso_codigo:0,concurso_data:"",concurso_id:"",teimosinha:1,fechamento:"",time_id:h,diadesorte_mes:c}}function s(n,i){var r=[],f=$('tr[data-grupoid="'+n.grupo_id+'"]').find("a.add_cart"),e;$('tr[data-grupoid="'+n.grupo_id+'"] select').attr("disabled","disabled");r[0]=f.html();f.html('<img height="24" align="center" style="text-align: center; display: inline-block;" alt="Carregando..." src="/_common/img/loader-128-green.gif"/>');e=u.add(n).then(function(n){n.status&&($.each(n.added,function(n,i){var u=$('tr[data-grupoid="'+i+'"] select').removeAttr("disabled"),f;u.val("");t.cotas[$('tr[data-grupoid="'+i+'"]').data("secao")].subtotal=0;t[u.data("ng-model")]="";f=$('tr[data-grupoid="'+i+'"]').find("a.add_cart");r[n]&&f.html(r[n])}),t[i]?t[i]():typeof i=="function"&&i())},function(){})}t.filtroBolao={cotaQtde:{min:0,max:50,sliderOpt:{floor:0,ceil:50,vertical:!0,reversedControls:!0,translate:function(n){return n+(+n==50?"+":"")}}},cotaValor:{min:0,max:500,sliderOpt:{floor:0,ceil:500,step:10,vertical:!0,reversedControls:!0,translate:function(n){return n+(+n==500?"+":"")}}}};t.cotas={megasena:{subtotal:0},lotofacil:{subtotal:0},lotomania:{subtotal:0},quina:{subtotal:0},duplasena:{subtotal:0},loteca:{subtotal:0},federal:{subtotal:0},timemania:{subtotal:0},diadesorte:{subtotal:0},"megasena-2":{subtotal:0}};t.resultOne;t.resultTwo;t.resultTime;$(".cotas-selectbox").on("change",function(n){var i=$(n.currentTarget),e=i.val().split("|"),r,o,s,f;e.length>1?r=u.secoes[""+e.shift()]:(o=i.closest("tr"),r=o.data("secao"));s=i.closest("tbody");f=0;s.find(".cotas-selectbox").each(function(n,t){var i=$(t).val().split("|"),r;i.length>1&&(r=i.pop(),f+=parseFloat(i[3])*parseInt(r))});t.cotas[r].subtotal=f;t.$apply()});t.limpar_carrinho=function(n,i){i.preventDefault();$("#table_"+n).find("select").each(function(n,i){$(i).find("option").eq(0).attr("selected","selected");t[$(i).data("ng-model")]=""});t.cotas[n].subtotal=0};t.is_added=function(n){return u.hasItem(n)};t.bolaoRowClicked=null;t.$on("modal_details_loaded",function(n){n.resultado1&&(t.resultOne=n.resultado1.split("-"));n.resultado2&&(t.resultTwo=n.resultado1.split("-"));n.ResultadoTimeCoracao&&(t.resultTime=n.ResultadoTimeCoracao)});t.add_esn=function(n){var t,r,i,f;return n&&n.preventDefault(),$(n.currentTarget).attr("disabled","disabled"),t=$(n.currentTarget).find("img"),r=t.attr("src"),t.attr("src","/_common/img/loader-128-green.gif"),t.attr("alt","Carregando..."),i=o(n.currentTarget),f=u.add_esn(i),typeof i.numeros!="string"&&(i.numeros=i.numeros.join("-")),f.then(function(){t.attr("src",r);$(n.currentTarget).removeAttr("disabled")},function(){t.attr("src",r);$(n.currentTarget).removeAttr("disabled")}),!0};t.add_grupo=function(n,i,r){var f,h,e,o;if(n.preventDefault(),i=i?$(i):$(n.currentTarget),$(i).attr("disabled")!=="disabled"){f=i.closest("tr");h=!1;n.currentTarget.id==="btnComprarModalGrupo"&&(f=t.bolaoRowClicked,h=!0);e=f.find("select").val();e?(e=e.split("|"),e=e.pop()):(e=1,f.find("select option").eq(1).attr("selected","selected"));o={produto_secao_id:u.secoes_id[f.data("secao")],grupo_id:f.data("grupoid"),grupo_codigo:f.data("grupo_codigo"),qtd_cotas:e,qtd_disp:f.data("qtd_disp"),valor:f.data("valor"),concurso_id:f.data("concurso_id"),concurso_data:f.data("concurso_data"),concurso_codigo:f.data("concurso_codigo")};try{Intersena20.Site.DataLayer.SetJogoCarrinho(o.grupo_codigo,o.concurso_codigo,o.concurso_data,f.data("concurso_valor"),f.data("concurso_valor_desc"),null,o.qtd_cotas,!1,!1,!1,"","","",o.valor)}catch(n){}s(o,r);h&&setTimeout(function(){$("#details_modal").modal("hide")},500)}};t.add_multiplos_grupos=function(n,i){n.preventDefault();var r=$("#table_"+i).find("tbody > tr"),u=r.length;$.each(r,function(i,r){$(r).find("select").val()!==""?i===u-1?t.add_grupo(n,r,"deferreredGroupSuccessMessage"):t.add_grupo(n,r):i===u-1&&t.deferreredGroupSuccessMessage()})};t.deferreredGroupSuccessMessage=function(){n.$emit("cart_added",{})};t.modal=angular.extend(t.modal,{view_all:{id:"mini-cart-modal","class":"view_cart_modal",header:"Meu Carrinho",icon:"glyphicon-shopping-cart",body:"_common/js/app/view/carrinho/mini-row-all.html",footer:!1,backdrop:"static"},group_details:{id:"details_modal","class":"view_details_modal",header:"Carregando...",body:"_common/js/app/view/grupos/details.html",footer:" ",closebutton:!0,buttonlefttype:"default",buttonrighttype:"primary",buttonlefttext:"Fechar",backdrop:"static"},mega:{id:"mega_modal","class":"view_details_modal modal-lg",header:"Mega-Sena",body:"_common/js/app/view/grupos/mega.html",closebutton:!0,buttonlefttype:"default",buttonrighttype:"primary",buttonlefttext:"Fechar",backdrop:"static"},game:{id:"game_modal_{LOTERIA}",header:!1,"class":"game-modal",icon:"glyphicon glyphicon-align-justify",body:"_common/js/app/view/game/game-modal.html",footer:!1,backdrop:"static"}});t.grupo_jogos=[];t.$on("show.bs.modal.details_modal",function(n,t){e(t)});t.$on("hidden.bs.modal.details_modal",function(n,i){var r=$(i.relatedTarget).closest("tr");t.grupo_details={};$(i.target).find(".modal-header h4").text(t.modal.group_details.header);window.history.pushState({},"",window.location.pathname)});t.$on("show.bs.modal.mega_modal",function(n,i){var f=angular.element(i.relatedTarget),r={},u;f?(r={},u=f.closest("tr"),r.secao_id=9,r.secao=u.data("secao"),r.grupo_20_id=u.data("grupo_20_id"),r.grupo_codigo=u.data("grupo_codigo"),r.concurso=u.data("concurso_codigo"),r.concurso_data=u.data("concurso_data"),r.concurso_id=u.data("concurso_id"),r.max_dezenas=u.data("qtd_dezenas"),r.valor_ganhador=u.data("valor_ganhador"),r.cotas=u.data("qtd_cotas"),r.valor_jogo=u.data("valor_jogo"),r.qtd_disp=u.data("qtd_disp"),angular.element(i.target).find(".modal-header h4").html("<span class='mega-modal-header-title'>Mega-Sena<\/span> <span class='mega-modal-header-grupo-data'><span>Grupo: <span class='label label-success'>"+u.data("grupo_codigo")+"<\/span><\/span><\/span>"),t.$broadcast("it.mega2.loaded",r)):r={}});t.$on("hidden.bs.modal.mega_modal",function(){t.$broadcast("it.mega2.unloaded")});t.printing=!1;t.$on("it-printing",function(){t.printing=!0});t.$on("it-printing-complete",function(){t.printing=!1});t.lastGetGameModalOptions="";t.getGameModalOptions=function(n,i,r){var e="getGameModalOptions|"+n+"|"+i+"|"+r,f;return t.lastGetGameModalOptions===e?t.modal.game:(t.lastGetGameModalOptions=e,f=$("#table_"+n).find("tbody > tr").eq(0),f.length===0)?null:(t.modal.game.class="game-modal apostas-box ab-"+n+" modal-lg",t.modal.game.game_options={cart:u.getCart(),dezenas:r||60,loteria:f.data("secao"),concurso:f.data("concurso_codigo"),concurso_data:f.data("concurso_data"),concurso_id:f.data("concurso_id"),params:i},t.modal.game)};t.filtroExibirBolao=function(n,i){var r=t.filtroBolao,u=function(n){return+n.min==+n.sliderOpt.floor},f=function(n){return+n.max==+n.sliderOpt.ceil};return(u(r.cotaQtde)||r.cotaQtde.min<=n)&&(f(r.cotaQtde)||r.cotaQtde.max>=n)&&(u(r.cotaValor)||r.cotaValor.min<=i)&&(f(r.cotaValor)||r.cotaValor.max>=i)}}])}.call(this),function(){"use strict";angular.module("app.controllers.newsletter",[]).controller("NewsletterCtrl",["$scope","Utils","NewsletterSrv",function(n,t,i){n.newsletter={email:""};n.addEmail=function(){return i.add(n.newsletter.email).then(function(i){Intersena20.Site.DataLayer.SetIdentify("","",n.newsletter.email);t.toast("Sucesso!","<p>"+i+"<\/p>","success")},function(){t.toast("Erro!","Erro ao adicionar email a lista, por favor contate o administrador.","error")}),!1}}])}.call(this),function(){String.prototype.replaceAll=function(n,t,i){return this.replace(new RegExp(n.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),i?"gi":"g"),typeof t=="string"?t.replace(/\$/g,"$$$$"):t)};angular.module("app.controllers.resultados",[]).controller("ResultadosCtrl",["$scope","ResultadosSrv","CartSrv","Utils",function(n,t,i,r){n.produto_secao=angular.element("#resultados-container").data("secao");n.loading_detalhes=!1;n.loading_concursos=!1;n.conc_especial_desc="";n.exibir_concurso_especial=!0;switch(i.secoes_id[n.produto_secao]){case 1:n.conc_especial_desc="Acumulado Mega da Virada";break;case 2:n.conc_especial_desc="Acumulado para Sorteio Especial da Independência";break;case 3:n.conc_especial_desc="Acumulado para Sorteio Especial de Páscoa";break;case 4:n.conc_especial_desc="Acumulado para Sorteio Especial de São João";break;default:n.exibir_concurso_especial=!1}if(n.empty=!1,n.form={produto_secao_id:i.secoes_id[n.produto_secao],concurso_codigo:"",data_inicial:"",data_final:""},n.table=[],n.search=function(i){if(i.preventDefault(),n.table=[],n.searchError="",n.form.concurso_codigo.trim().length===0&&(n.form.data_inicial.trim().length===0||n.form.data_final.trim().length===0)){n.searchError="Preencha o número do concurso ou data inicial e final.";return}n.empty=!1;n.loading_concursos=!0;t.search(n.form).then(function(t){n.table=JSON.parse(JSON.parse(t));n.table.length||(n.empty=!0);n.loading_concursos=!1},function(){r.toast("Erro durante a busca, por favor contate o administrador.");n.loading_concursos=!1})},n.faixas_primeiro=[],n.faixas_segundo=[],n.resultado_detalhes={},n.getConcursoTeste=function(i,u){i&&i.preventDefault();n.loading_detalhes=!0;t.getConcurso(n.form.produto_secao_id,u).then(function(t){var i,r;t=JSON.parse(JSON.parse(t));t.FaixaPremiacaoXML!==null&&(i=t.FaixaPremiacaoXML.split("#"),n.faixas_primeiro=i.map(function(n){return n.split("|")}));t.FaixaPremiacao2XML!==null&&(r=t.FaixaPremiacao2XML.split("#"),n.faixas_segundo=r.map(function(n){return n.split("|")}));t.ConcursoCodigo!==0?(n.resultado_detalhes.produto_secao_id=n.form.produto_secao_id,t.Origem==="Caixa"?n.resultado_detalhes=t:t.Origem==="Intersena"&&(n.resultado_detalhes.Origem=t.Origem,n.resultado_detalhes.ConcursoCodigo=t.ConcursoCodigo,n.resultado_detalhes.DataConcurso=t.DataConcurso,n.resultado_detalhes.produto_secao_id===7&&(t.Resultado1=t.Resultado1.replaceAll("<strong>Bilhete<\/strong>","").replaceAll("<br/>","").replaceAll("<p>","").replaceAll("<\/p>","-")),n.resultado_detalhes.Resultado1=t.Resultado1,n.resultado_detalhes.Resultado2=t.Resultado2,n.resultado_detalhes.Resultado_Time_Coracao=t.Resultado_Time_Coracao)):n.resultado_detalhes=null;n.loading_detalhes=!1},function(){r.toast("Erro carregando detalhes, por favor contate o administrador.");n.loading_detalhes=!1})},angular.element("#resultados-container").length)var u=angular.element("#resultados-container").data("concurso-atual")}])}.call(this),function(){"use strict";var n=angular.module("app");n.controller("EstatisticaSorteioDeNumerosCtrl",["$scope","$location","$anchorScroll","estatisticaSorteioDeNumerosService",function(n,t,i,r){function s(n){return n.separarNumeros=n.apostarMinimo,n.apostarMinimo===15?n.separarNumeros=5:n.apostarMinimo===50&&(n.separarNumeros=10),n}function f(n,t){var i=e(n),r=i.map(function(t){return n.filter(function(n){return n.numero===t})[0]||null}).filter(function(n){return n!==null}),u=i.map(function(n){return t.filter(function(t){return parseInt(t.numero)===parseInt(n)})[0]}).filter(function(n){return n!==null});r.map(function(t){var i=u.filter(function(n){return n.numero===t.numero})[0]||{};i.quantidade&&(n[n.indexOf(t)].quantidade=i.quantidade+"x")})}function e(n){var t=n.slice().map(function(n){return parseInt(n.numero)});return t.filter(function(n,i){return t.indexOf(t[i])===i})}function h(n){var t=n.filter(function(t,i){t.numero=parseInt(t.numero);t.numero=o(t.numero);n[i].numero=t.numero;var r=n.filter(function(n){return n.numero===t.numero})[0]||{};return n[i].duplicado=t.numero>0&&n.indexOf(r)!==i,n[i].duplicado});return t.length>0}function u(n,t){return n.quantidade-t.quantidade}function o(n){return n<10?"0"+n:n}n.loterias=[];n.loteriaSelecionada={};n.timemaniaTimeSelecionado={};n.numerosSelecionados=[];n.sorteioEmConcursos=null;n.timemaniaTimes=window.times_coracao||[];n.configurarDadosLoterias=function(t,i){i=window.sessionStorage.getItem("loteria");n.loterias=t.map(s);n.sorteioEmConcursos=null;var r=t.filter(function(n){return n.secao===i})[0]||t[0];n.escolherLoteria(r)};n.escolherLoteria=function(t){n.loteriaSelecionada=t;n.haDuplicadas=!1;n.quantidadeDeDezenasInvalida=!1;n.dezenasSelecionadaOpcoes=Array(t.apostarMaximo-t.apostarMinimo+1).join(",").split(",").map(function(n,i){return i+t.apostarMinimo});n.escolherdezenasSelecionada(t.apostarMinimo)};n.escolherdezenasSelecionada=function(t){for(n.dezenasSelecionada=t,n.sorteioEmConcursos=null,n.numerosSelecionados=n.numerosSelecionados.splice(0,t).map(function(n){return{numero:n.numero}});n.numerosSelecionados.length<t;)n.numerosSelecionados.push({numero:"00"})};n.escolherTimeDoCoracao=function(t){n.timemaniaTimeSelecionado=t};n.inputDezenaFocus=function(n,t){var i=parseInt(t[n].numero)||0;i<1&&(t[n].numero="")};n.inputDezenaBlur=function(n,t){t[n].numero=parseInt(t[n].numero)||0;t[n].numero=o(t[n].numero)};n.inputDezenaSomenteNumeros=function(n,t){var i=t[n].numero.substring(0,2).replace(/[^0-9]+/g,"");t[n].numero=parseInt(i)||0;t[n].quantidade=null};n.calcularSorteios=function(t,i){n.exibirNumerosReferencia=!1;var o=r,s=e(i);if(n.haDuplicadas=h(i),n.quantidadeDeDezenasInvalida=s.length<t.apostarMinimo,n.quantidadeDeDezenasInvalida||n.haDuplicadas){n.sorteioEmConcursos=null;return}o.obterSorteioEmConcursos(t.secao,s).then(function(t){t=JSON.parse(t);t=JSON.parse(t);t=t.sort(function(n,t){return n[0].acertos-t[0].acertos}).reverse();t=t.map(function(n){return n.sort(function(n,t){return parseInt(n.concurso)-parseInt(t.concurso)}).reverse()});n.sorteioEmConcursos=t}).catch(function(n){console.log(n)});t.numerosReferencia?f(n.numerosSelecionados,t.numerosReferencia.geral):o.ObterReferenciaNumerosSorteios(t.secao).then(function(i){i=JSON.parse(i);i=JSON.parse(i);i=i.map(function(n){return parseInt(n.numero)<10&&(n.numero="0"+n.numero),n.numero=n.numero.toString(),n});var r=i.slice().sort(u).reverse();t.numerosReferencia={geral:i.slice(),maisSorteadas:r.slice().splice(0,10),menosSorteadas:r.slice().splice(-10,10).reverse()};f(n.numerosSelecionados,t.numerosReferencia.geral)}).catch(function(n){console.log(n)});t.classe!=="timemania"||t.timesReferencia?t.classe!=="diadesorte"||t.mesesReferencia||o.ObterReferenciaTimesSorteiosDiadesorte().then(function(n){n=JSON.parse(n);n=JSON.parse(n);var i=n.slice().sort(u).reverse();t.mesesReferencia={geral:n.slice(),maisSorteados:i.slice().splice(0,6),menosSorteados:i.slice().splice(-6,6).reverse()}}).catch(function(){console.log(error)}):o.ObterReferenciaTimesSorteiosTimemania().then(function(n){n=JSON.parse(n);n=JSON.parse(n);var i=n.slice().sort(u).reverse();t.timesReferencia={geral:n.slice(),maisSorteados:i.slice().splice(0,10),menosSorteados:i.slice().splice(-10,10).reverse()}}).catch(function(n){console.log(n)})};n.separarNumeros=function(n,t,i){return t>=i.separarNumeros*2&&n%i.separarNumeros==0};n.escolherLoteriaBySecao=function(r){var u=function(n){return parseInt(n.secao)===parseInt(r)},f=n.loterias.filter(u)[0]||{};n.escolherLoteria(f);t.hash("topo");i()}}])}(),function(){"use strict";function t(n,t,i,r,u,f){function l(n){return function(t){if(t.sucesso==="OK"&&t.isCadastro&&t.nome&&t.email)return f.enviar([c,n].join("-"),t.email,{nome:t.nome})}}function a(){var t="modalCadastroAcessoUltimo",i="modalCadastroJaEfetuouLogin",f=36e5,r=angular.element("#hdnStatusLogin").val()===1,e=window.localStorage[i]===1,n=window.localStorage[t],u=function(n){var t=new Date,i=new Date(n);return(t-i)/f>18};return r&&(window.localStorage[i]=1),(!n||u(n))&&(window.localStorage[t]=new Date),!r&&!e&&n&&u(n)}function v(n){var t=[];return n.nome&&n.nome.trim().length!==0||t.push("Insira seu nome."),n.email&&n.email.trim().length!==0||t.push("Insira seu e-mail."),!n.senha||n.senha.trim().length<4?t.push("Insira senha de ao menos 4 caracteres."):n.senhaConfirmacao&&n.senha.trim()===n.senhaConfirmacao.trim()||t.push("Senha e confirmação de senha devem ser iguais."),t}function y(n){var t=[];return n.email&&n.email.trim().length!==0||t.push("Insira seu e-mail."),n.senha&&n.senha.trim().length!==0||t.push("Insira sua senha."),t}function e(t){return function(i){(n.carregando=!1,i.error&&i.error==="popup_closed_by_user")||(t=[t,i],n.campos.erros=[t])}}function o(t){return function(i){n.carregando=!1;var r=typeof i=="string"?r:"";return t=[t,r],n.campos.sucessos=t,i}}function s(){n.campos=n.campos||{};n.campos.sucessos=[];n.campos.erros=[]}function h(){n.carregando=!0;window.location.reload()}var c="cadastro-via-modal";n.jaCadastrado=!1;n.carregando=!1;n.campos={};n.init=function(){a()&&$("#modalCadastro").modal("show")};n.exibirCadastro=function(){s();n.jaCadastrado=!1};n.exibirLogin=function(){s();n.jaCadastrado=!0};n.exibirRecuperarSenha=function(){s();n.esqueceuSenha=!0};n.cancelarRecuperarSenha=function(){s();n.esqueceuSenha=!1};n.recuperarSenha=function(t){(t=t||{},t.email&&t.email.trim().length!==0||(t.erros=["Preencha o campo de e-mail."]),t.erros.length>0)||(n.carregando=!0,i.recuperarSenha(t.email).then(o()).catch(e("Não foi possível efetuar login.")))};n.cadastrar=function(t){if(t=t||{},t.erros=v(t),!(t.erros.length>0)){var r=function(){try{return f.enviar(c+"-form",t.email,{nome:t.nome})}catch(n){}};n.carregando=!0;i.cadastrar(t.nome,t.email,t.senha).then(o("Usuário cadastrado.")).then(r).then(h).catch(e("Não foi possível efetuar cadastro."))}};n.logar=function(t){(t=t||{},t.erros=y(t),t.erros.length>0)||(n.carregando=!0,i.login(t.email,t.senha).then(o("Login efetuado.")).then(h).catch(e("Não foi possível efetuar login.")))};n.logarViaFacebook=function(){n.carregando=!0;r.login().then(i.loginViaFacebook).then(o("Login efetuado.")).then(l("facebook")).then(h).catch(e("Não foi possível efetuar login via Facebook."))};n.logarViaGoogle=function(){n.carregando=!0;u.login().then(i.loginViaGoogle).then(o("Login efetuado.")).then(l("google")).then(h).catch(e("Não foi possível efetuar login via Google."))}}var n=angular.module("app");n.controller("modalCadastroController",["$scope","Utils","loginService","facebookService","googleService","leadService",t])}();