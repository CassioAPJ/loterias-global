!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function merge(a,b){return a="object"===(void 0===a?"undefined":_typeof(a))?a:{},b="object"===(void 0===b?"undefined":_typeof(b))?b:{},Object.keys(a).concat(Object.keys(b)).reduce(function(merged,key){return merged[key]=b[key]||a[key],merged},{})}function tryOrLogError(fn){try{return fn()}catch(err){for(var _console,_len=arguments.length,messages=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)messages[_key-1]=arguments[_key];(_console=console).error.apply(_console,messages.concat([err]))}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ERROR_CUSTOM_DATA=function(event){return"Ocorreu um erro ao tentar obter dados customizados para o evento '"+event+"'.\n\n"},helpers={waitFor:function(pred){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(resolve){var interval=options.interval||200,retries="number"==typeof options.retries?options.retries:10;setTimeout(function callback(retryCount){return function(){retries>0&&retryCount>=retries||pred()?resolve():setTimeout(callback(retryCount+1),interval)}}(0),interval)})},waitForWithReject:function(pred){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(resolve,reject){var interval=options.interval||200,retries="number"==typeof options.retries?options.retries:10;setTimeout(function callback(retryCount){return function(){retries>0&&retryCount<=retries?pred()?resolve():setTimeout(callback(retryCount+1),interval):retryCount>retries&&"function"==typeof reject&&reject()}}(0),interval)})},mergeObjects:function(){for(var _len2=arguments.length,objs=Array(_len2),_key2=0;_key2<_len2;_key2++)objs[_key2]=arguments[_key2];return objs.reduce(merge,{})},buildCustomDataProvider:function(){for(var _len3=arguments.length,dependencies=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)dependencies[_key3-1]=arguments[_key3];var source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{identify:identify,track:track};return{getCustomUserData:function(){var _source$identify;return"object"===(void 0===source?"undefined":_typeof(source))&&"function"==typeof source.identify?tryOrLogError((_source$identify=source.identify).bind.apply(_source$identify,[null,{}].concat(dependencies))):{}},getCustomEventData:function(event){var _source$track$event,params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"===(void 0===source?"undefined":_typeof(source))&&"object"===_typeof(source.track)&&"function"==typeof source.track[event]?tryOrLogError((_source$track$event=source.track[event]).bind.apply(_source$track$event,[null,params].concat(dependencies)),ERROR_CUSTOM_DATA(event)):{}}}},formatBirthday:function(birthday){if(!birthday||10!==birthday.length)return null;if(birthday.match("-")){var splitBirthday=birthday.split("-");if(4===splitBirthday[0].length&&"Invalid Date"!==new Date(birthday).toString())return birthday;if(4===splitBirthday[2].length&&"Invalid Date"!==new Date(splitBirthday[2]+"-"+splitBirthday[1]+"-"+splitBirthday[0]).toString())return splitBirthday[2]+"-"+splitBirthday[1]+"-"+splitBirthday[0]}if(birthday.match("/")){var _splitBirthday=birthday.split("/");if("Invalid Date"!==new Date(_splitBirthday[1]+"/"+_splitBirthday[0]+"/"+_splitBirthday[2]).toString())return _splitBirthday[2]+"-"+_splitBirthday[1]+"-"+_splitBirthday[0]}return null},transformDataJs:function(selector){return[].concat(_toConsumableArray(document.querySelectorAll(selector))).reduce(function(initial,curr){return curr.value&&(initial[curr.name]=curr.value),initial},{})},track:function(pages){pages.forEach(function(page){helpers.isPath(page.regex)&&dito.track({action:page.action,data:page.data})})},dig:function(ground,layers,structure){return layers=layers.split("."),ground&&1==layers.length?ground[layers[0]]||structure:ground&&ground[layers[0]]?helpers.dig(ground[layers[0]],layers.slice(1).join("."),structure)||structure:structure},formatGender:function(str){var males=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["m","masculino"],females=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["f","feminino"];if(str&&0!==str.length)return males.some(function(value){return value===str.toLowerCase().trim()})?"male":females.some(function(value){return value===str.toLowerCase().trim()})?"female":void 0},formatPrices:function(text){if(text&&0!==text.length)return parseFloat(text.replace(/R\$(\s?)/,"").replace(/\./g,"").replace(/,/g,".").trim())},formatCpf:function(text){return String(text).replace(/\W/g,"")||void 0},formatCnpj:function(text){return text.replace(/\./g,"").replace(/-/g,"").replace(/\//g,"").trim().toString()},formatHyphen:function(text){return String(text).replace(/-/g," ").toString()},formatAction:function(str){return str=String(str).trim(),str.replace(/[áàäâãÁÀÄÂÃ]/g,"a").replace(/[éèëẽêÉÈÊẼ]/g,"e").replace(/[íìĩîïÍÌĨÎÏ]/g,"i").replace(/[óõòôöÖÓÕÒÔ]/g,"o").replace(/[úũùûüÜÚŨÙÛ]/g,"u").replace(/ç/g,"c").replace(/\s|\_/g,"-").replace(/\-+/g,"-").toLowerCase().replace(/[^a-z\-]/g,"").replace(/-*$/,"")},isUnmasked:function(text){return-1===text.indexOf("*")},isPath:function(pathname){return window.location.pathname.match(pathname)},isPathHash:function(pathname){return window.location.hash.match(pathname)},getFormData:function(selector){if(void 0===("undefined"==typeof jQuery?"undefined":_typeof(jQuery)))return{};var form=jQuery(selector).serializeArray(),data={};return form.forEach(function(element){data[element.name]=element.value}),data},pathSearch:function(string){return window.location.search.match(string)},clearEmptyValue:function(obj){for(var prop in obj)null===obj[prop]||void 0===obj[prop]||""===obj[prop]||" "===obj[prop]?delete obj[prop]:"object"===_typeof(obj[prop])&&helpers.clearEmptyValue(obj[prop])},getUrlParameter:function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))},arrayUnique:function(array){return array.filter(function(item,pos){return array.indexOf(item)==pos}),array}};helpers.html={findParentByClass:function(element,className){if(!element||!element.parentNode)return null;var parent=element.parentNode;return parent.classList.contains(className)?parent:helpers.html.findParentByClass(parent,className)},findElement:function(selectorOrSelectors){if("string"==typeof selectorOrSelectors)return document.querySelector(selectorOrSelectors);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=selectorOrSelectors[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var selector=_step.value,element=helpers.html.findElement(selector);if(element)return element}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},helpers.validate={email:function(s){if(s&&0!==s.length)return s.match(/^([a-zA-Z0-9_\-\.+]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/)}},exports.default=helpers},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _helpers=__webpack_require__(0),_helpers2=_interopRequireDefault(_helpers),_gtm=__webpack_require__(2),_gtm2=_interopRequireDefault(_gtm),trackings={tracking:function(){_gtm2.default.on("track",function(event){var revenue=_helpers2.default.dig(event,"revenue",""),idTransacao=_helpers2.default.dig(event,"data.id_transacao",""),idProduto=_helpers2.default.dig(event,"data.id_produto","");""===revenue?"comprou-itens"===_helpers2.default.formatAction(event.action)?dito.track({action:_helpers2.default.formatAction(event.action),message_id:dito.Helpers.sha1(""+idTransacao+dito.AppSettings.apiKey+idProduto),data:event.data||""}):dito.track({action:_helpers2.default.formatAction(event.action),data:event.data||""}):dito.track({action:_helpers2.default.formatAction(event.action),message_id:dito.Helpers.sha1(""+idTransacao+dito.AppSettings.apiKey),revenue:revenue,data:event.data||""})})},identify:function(){_gtm2.default.on("identify",function(event){var email=event.email;if(_helpers2.default.validate.email(email)){var user={id:dito.generateID(email),name:event.name||"",email:email,gender:event.gender||"",location:event.location||"",birthday:_helpers2.default.formatBirthday(event.birthday)||"",data:event.data||{}};_helpers2.default.clearEmptyValue(user),dito.identify(user)}})}};({install:function(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _helpers2.default.waitFor(function(){return window.dito},{retries:0}).then(function(){return Object.keys(trackings).forEach(function(key){return trackings[key](params[key])})}).then(_gtm2.default.install)}}).install()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _helpers=__webpack_require__(0),_helpers2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_helpers),gtm={_listeners:{},data:function(name){var data=void 0;return(window.dataLayer||[]).forEach(function(obj){return obj[name]&&(data=obj[name])}),data},on:function(eventName,func){var listeners=gtm._listeners[eventName]||[];listeners.push(func),gtm._listeners[eventName]=listeners},install:function(){return _helpers2.default.waitFor(function(){return window.dataLayer},{retries:0}).then(function(){var notifyListeners=function(d){d.event&&gtm._listeners[d.event]&&gtm._listeners[d.event].forEach(function(f){return f(d)})},dataLayer=window.dataLayer||[],push=dataLayer.push.bind(dataLayer);dataLayer.push=function(d){push(d),notifyListeners(d)},dataLayer.forEach(notifyListeners)})}};exports.default=gtm}]);